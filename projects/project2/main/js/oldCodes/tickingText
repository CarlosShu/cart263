
// In create();

// Variables.
this.currentTime = 150;
this.timedEvent;

//  Instructions text.
this.text = this.add
  .text(0, 0, "TEXT", {
    fontSize: "15px",
    align: "center",
    fontFamily: "block",
  })
  .setOrigin(0.5);

  // Time loop.
  this.timedEvent = this.time.addEvent({
    delay: 50,
    callback: this.currentText,
    callbackScope: this,
    loop: true,
  });

// In update();

if (this.player.touchesdoor == false) {
  if (this.currentTime > 100) {
    this.text.setText("Use WASD to walk, jump, and crouch");
  } else if (this.currentTime <= 100 && this.currentTime > 50) {
    this.text.setText("Hold SHIFT to sprint");
  } else if (this.currentTime <= 50) {
    this.text.setText("Press R to reset the level");
  }
} else if (this.player.touchesdoor == true) {
  this.text.setText("Press SPACE to enter The Forest");
}

// Updates the position of the text relative to the player's position.
this.text.x = this.player.body.position.x;
this.text.y = this.player.body.position.y + 350;

// Own functions.

// Timer that switches between the displayed text.
currentText() {
  this.currentTime--;
  if (this.currentTime === 0) {
    this.currentTime = 150;
  }
}

// Foreground.
this.foreground = this.add.group({
  key: "groundFloor",
  setScale: { x: 0.5, y: 0.5 },
  repeat: 2,
  setXY: { x: -720, y: 0, stepX: 1500 },
});
this.foreground.children.iterateLocal("setDepth", -1);
this.foreground.children.iterateLocal("setPipeline", "Light2D");
